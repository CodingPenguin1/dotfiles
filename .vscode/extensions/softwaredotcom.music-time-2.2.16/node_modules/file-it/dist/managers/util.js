"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.cleanJsonString = exports.jsonStringify = void 0;
/**
 * Stringify the object and replace newlines with EOL
 * @param obj
 * @param options
 */
function jsonStringify(obj, options) {
    if (options === void 0) { options = {}; }
    if (!obj) {
        return null;
    }
    var EOL = options.EOL || "\n";
    try {
        var str = JSON.stringify(obj, null, options.spaces);
        if (str !== null && str !== undefined) {
            return str.replace(/\n/g, EOL) + EOL;
        }
        return EOL;
    }
    catch (err) {
        console.log("Error stringifying the object: " + err.message);
        return null;
    }
}
exports.jsonStringify = jsonStringify;
/**
 * Replace the Byte Order Mark
 * @param content
 */
function cleanJsonString(content) {
    var EOL = "\n";
    if (!content) {
        return content;
    }
    // we do this because JSON.parse would convert it to a utf8 string if encoding wasn't specified
    if (Buffer.isBuffer(content)) {
        content = content.toString("utf8");
    }
    if (content !== null && content !== undefined) {
        return content
            .replace(/^\uFEFF/, "")
            .replace(/\r\n/g, "")
            .replace(/\n/g, "");
    }
    return EOL;
}
exports.cleanJsonString = cleanJsonString;
